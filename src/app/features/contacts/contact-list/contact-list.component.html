<div class="contact-wrapper">
  @if (groupedContactsEntries.length > 0) {
    <button class="add-kontakt-button" (click)="openModal2()">
      <svg
        width="300"
        height="57"
        viewBox="0 0 352 57"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        class="contact-icon"
      >
        <!-- SVG-Inhalt unverÃ¤ndert -->
      </svg>
    </button>

    @for (group of groupedContactsEntries; track group[0]) {
      <h2 class="group-heading">{{ group[0] }}</h2>
      <div class="divider"></div>

      @for (contact of group[1]; track contact.id) {
        <div
          class="contact-item"
          [class.active]="selectedContact?.id === contact.id"
          (click)="onContactClick(contact)"
          style="cursor: pointer"
        >
          <div
            class="avatar"
            [ngStyle]="{ 'background-color': getAvatarColor(contact.name) }"
          >
            {{ getInitials(contact.name) }}
          </div>
          <div class="contact-info">
            <strong>{{ contact.name }}</strong>
            <small class="email">{{ contact.email }}</small>
          </div>
        </div>
      }
    }
  } @else {
    @if (loading) {
      <div>Kontakte werden geladen...</div>
    } @else {
      @if (error) {
        <div>{{ error }}</div>
      } @else {
        <div>Keine Kontakte vorhanden.</div>
      }
    }
  }
</div>

@if (modal1Visible) {
  <app-modal
    [visible]="modal1Visible"
    [contactToEdit]="contactToEdit"
    (closed)="closeModal1()"
    (contactSaved)="onContactSaved()"
  ></app-modal>
}

@if (modal2Visible) {
  <app-modal2 [visible]="modal2Visible" (closed)="closeModal2()"></app-modal2>
}